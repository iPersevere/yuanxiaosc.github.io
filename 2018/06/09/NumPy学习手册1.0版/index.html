<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="numpy,python," />










<meta name="description" content="1import numpy as np 1.创建How to create a numpy array?the most common ways is to create one from a list or a list like an object by passing it to the np.array function. 123list1 = list(range(4))arr1d =">
<meta name="keywords" content="numpy,python">
<meta property="og:type" content="article">
<meta property="og:title" content="NumPy 学习手册1.0版">
<meta property="og:url" content="http://yoursite.com/2018/06/09/NumPy学习手册1.0版/index.html">
<meta property="og:site_name" content="望江人工智库">
<meta property="og:description" content="1import numpy as np 1.创建How to create a numpy array?the most common ways is to create one from a list or a list like an object by passing it to the np.array function. 123list1 = list(range(4))arr1d =">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-06-09T08:25:21.995Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="NumPy 学习手册1.0版">
<meta name="twitter:description" content="1import numpy as np 1.创建How to create a numpy array?the most common ways is to create one from a list or a list like an object by passing it to the np.array function. 123list1 = list(range(4))arr1d =">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/06/09/NumPy学习手册1.0版/"/>





  <title>NumPy 学习手册1.0版 | 望江人工智库</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">望江人工智库</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/06/09/NumPy学习手册1.0版/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="望江车神">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars0.githubusercontent.com/u/16183570?s=400&u=5e09ebb784cfd47de99d249f2be2413adcf4e672&v=4">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="望江人工智库">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">NumPy 学习手册1.0版</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-06-09T15:52:34+08:00">
                2018-06-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/python/" itemprop="url" rel="index">
                    <span itemprop="name">python</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure>
<h1 id="1-创建"><a href="#1-创建" class="headerlink" title="1.创建"></a>1.创建</h1><h2 id="How-to-create-a-numpy-array"><a href="#How-to-create-a-numpy-array" class="headerlink" title="How to create a numpy array?"></a>How to create a numpy array?</h2><p>the most common ways is to create one from a list or a list like an object by passing it to the <strong>np.array</strong> function.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list1 = list(range(<span class="number">4</span>))</span><br><span class="line">arr1d = np.array(list1)</span><br><span class="line">arr1d</span><br></pre></td></tr></table></figure>
<pre><code>array([0, 1, 2, 3])
</code></pre><p> if you apply a function it is performed on every item in the array, rather than on the whole array object.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr1d + <span class="number">2</span></span><br></pre></td></tr></table></figure>
<pre><code>array([2, 3, 4, 5])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list2 = [[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]</span><br><span class="line">arr2d = np.array(list2)</span><br><span class="line">arr2d</span><br></pre></td></tr></table></figure>
<pre><code>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
</code></pre><p>To control the memory allocations you may choose to use one of ‘float32’, ‘float64’, ‘int8’, ‘int16’ or ‘int32’.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr2d_f = np.array(list2, dtype=<span class="string">'float'</span>)</span><br><span class="line">arr2d_f</span><br></pre></td></tr></table></figure>
<pre><code>array([[0., 1., 2.],
       [3., 4., 5.],
       [6., 7., 8.]])
</code></pre><p>You can also convert it to a different datatype using the astype method.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2d_f.astype(<span class="string">'int'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([[0, 1, 2],
       [3, 4, 5],
       [6, 7, 8]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr2d_b = np.array([<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>], dtype=<span class="string">'bool'</span>)</span><br><span class="line">arr2d_b</span><br></pre></td></tr></table></figure>
<pre><code>array([ True, False,  True])
</code></pre><p>However, if you are uncertain about what datatype your array will hold or if you want to hold characters and numbers in the same array, you can set the dtype as ‘object’.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr1d_obj = np.array([<span class="number">1</span>, <span class="string">'a'</span>], dtype=<span class="string">'object'</span>)</span><br><span class="line">arr1d_obj</span><br></pre></td></tr></table></figure>
<pre><code>array([1, &#39;a&#39;], dtype=object)
</code></pre><p>You can always convert an array back to a python list using tolist().</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr1d_obj.tolist()</span><br></pre></td></tr></table></figure>
<pre><code>[1, &#39;a&#39;]
</code></pre><h2 id="How-to-create-sequences-repetitions-and-random-numbers-using-numpy"><a href="#How-to-create-sequences-repetitions-and-random-numbers-using-numpy" class="headerlink" title="How to create sequences, repetitions and random numbers using numpy?"></a>How to create sequences, repetitions and random numbers using numpy?</h2><p>The <strong>np.arange</strong> function comes handy to create customised number sequences as ndarray.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Lower limit is 0 be default</span></span><br><span class="line">np.arange(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([0, 1, 2, 3, 4])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0 to 9</span></span><br><span class="line">print(np.arange(<span class="number">0</span>, <span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[0 1 2 3 4 5 6 7 8 9]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 0 to 9 with step of 2</span></span><br><span class="line">print(np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[0 2 4 6 8]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 10 to 1, decreasing order</span></span><br><span class="line">print(np.arange(<span class="number">10</span>, <span class="number">0</span>, <span class="number">-1</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[10  9  8  7  6  5  4  3  2  1]
</code></pre><p>You can set the starting and end positions using np.arange. But if you are focussed on <strong>the number of items</strong> in the array you will have to manually calculate the appropriate step value.</p>
<p>Say, you want to create an array of exactly 10 numbers between 1 and 50, Can you compute what would be the step value?</p>
<p>Well, I am going to use the <strong>np.linspace</strong> instead.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Start at 1 and end at 50</span></span><br><span class="line">np.linspace(start=<span class="number">1</span>, stop=<span class="number">50</span>, num=<span class="number">10</span>, dtype=int)</span><br></pre></td></tr></table></figure>
<pre><code>array([ 1,  6, 11, 17, 22, 28, 33, 39, 44, 50])
</code></pre><p>Notice since I explicitly forced the dtype to be int, the numbers are not equally spaced because of the rounding.</p>
<p>Similar to np.linspace, there is also np.logspace which rises in a logarithmic scale. In np.logspace, the given start value is actually base^start and ends with base^stop, with a default based value of 10.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Limit the number of digits after the decimal to 2</span></span><br><span class="line">np.set_printoptions(precision=<span class="number">2</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Start at 10^1 and end at 10^50</span></span><br><span class="line">np.logspace(start=<span class="number">1</span>, stop=<span class="number">50</span>, num=<span class="number">10</span>, base=<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([1.00e+01, 2.78e+06, 7.74e+11, 2.15e+17, 5.99e+22, 1.67e+28,
       4.64e+33, 1.29e+39, 3.59e+44, 1.00e+50])
</code></pre><p>The np.zeros and np.ones functions lets you create arrays of desired shape where all the items are either 0’s or 1’s.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.zeros([<span class="number">2</span>,<span class="number">3</span>])</span><br></pre></td></tr></table></figure>
<pre><code>array([[0., 0., 0.],
       [0., 0., 0.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.ones([<span class="number">3</span>,<span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 1., 1., 1.],
       [1., 1., 1., 1.],
       [1., 1., 1., 1.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.full((<span class="number">3</span>, <span class="number">3</span>), <span class="keyword">True</span>, dtype=bool)</span><br></pre></td></tr></table></figure>
<pre><code>array([[ True,  True,  True],
       [ True,  True,  True],
       [ True,  True,  True]])
</code></pre><p>关于numpy.array总结:  </p>
<ul>
<li>Arrays support vectorised operations, while lists don’t.</li>
<li>Once an array is created, you cannot change its size. You will have to create a new array or overwrite the existing one.</li>
<li>Every array has one and only one dtype. All items in it should be of that dtype.</li>
<li>An equivalent numpy array occupies much less space than a python list of lists.</li>
</ul>
<h2 id="How-to-create-a-2D-array-containing-random-floats-between-5-and-10"><a href="#How-to-create-a-2D-array-containing-random-floats-between-5-and-10" class="headerlink" title="How to create a 2D array containing random floats between 5 and 10?"></a>How to create a 2D array containing random floats between 5 and 10?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.random.uniform(<span class="number">5</span>,<span class="number">10</span>, size=(<span class="number">3</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure>
<pre><code>array([[5.71, 8.8 , 6.41, 6.61, 6.81],
       [9.54, 7.31, 5.75, 6.58, 6.96],
       [7.25, 7.37, 8.44, 5.23, 6.92]])
</code></pre><h2 id="How-to-generate-random-numbers"><a href="#How-to-generate-random-numbers" class="headerlink" title="How to generate random numbers?"></a>How to generate random numbers?</h2><p>The <strong>np.random</strong> module provides nice functions to generate random numbers (and also statistical distributions) of any given shape.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Random numbers between [0,1) of shape 2,3</span></span><br><span class="line">print(np.random.rand(<span class="number">2</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[[0.36 0.46 0.7 ]
 [0.24 0.9  0.74]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Normal distribution with mean=0 and variance=1 of shape 2,3</span></span><br><span class="line">print(np.random.randn(<span class="number">2</span>,<span class="number">3</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[[-0.84 -1.92 -0.04]
 [ 0.48  0.82  1.14]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Random integers between [0, 10) of shape 2,3</span></span><br><span class="line">print(np.random.randint(<span class="number">0</span>, <span class="number">10</span>, size=[<span class="number">2</span>,<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>[[7 9 0]
 [5 7 6]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># One random number between [0,1)</span></span><br><span class="line">print(np.random.random())</span><br></pre></td></tr></table></figure>
<pre><code>0.8461802742171424
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Random numbers between [0,1) of shape 2,3</span></span><br><span class="line">print(np.random.random(size=[<span class="number">2</span>,<span class="number">3</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>[[0.53 0.99 0.28]
 [0.4  0.74 0.09]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pick 10 items from a given list, with equal probability</span></span><br><span class="line">print(np.random.choice([<span class="string">'a'</span>, <span class="string">'e'</span>, <span class="string">'i'</span>, <span class="string">'o'</span>, <span class="string">'u'</span>], size=<span class="number">10</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;a&#39; &#39;i&#39; &#39;o&#39; &#39;a&#39; &#39;a&#39; &#39;a&#39; &#39;e&#39; &#39;u&#39; &#39;u&#39; &#39;e&#39;]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Pick 10 items from a given list with a predefined probability 'p'</span></span><br><span class="line">print(np.random.choice([<span class="string">'a'</span>, <span class="string">'e'</span>, <span class="string">'i'</span>, <span class="string">'o'</span>, <span class="string">'u'</span>], size=<span class="number">10</span>, p=[<span class="number">0.3</span>, <span class="number">.1</span>, <span class="number">0.1</span>, <span class="number">0.4</span>, <span class="number">0.1</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;o&#39; &#39;o&#39; &#39;o&#39; &#39;u&#39; &#39;a&#39; &#39;o&#39; &#39;o&#39; &#39;a&#39; &#39;a&#39; &#39;o&#39;]
</code></pre><p>Now, everytime you run any of the above functions, you get a different set of random numbers.</p>
<p>If you want to <strong>repeat the same set of random numbers every time</strong>, you need to set the seed or the random state. The see can be any value. The only requirement is you must set the seed to the same value every time you want to generate the same set of random numbers.</p>
<p>Once <strong>np.random.RandomState</strong> is created, all the functions of the np.random module becomes available to the created randomstate object.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create the random state</span></span><br><span class="line">rn = np.random.RandomState(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create random numbers between [0,1) of shape 2,2</span></span><br><span class="line">print(rn.rand(<span class="number">2</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[[0.54 0.28]
 [0.42 0.84]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Set the random seed</span></span><br><span class="line">np.random.seed(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create random numbers between [0,1) of shape 2,2</span></span><br><span class="line">print(np.random.rand(<span class="number">2</span>,<span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>[[0.54 0.28]
 [0.42 0.84]]
</code></pre><h2 id="How-to-create-repeating-sequences"><a href="#How-to-create-repeating-sequences" class="headerlink" title="How to create repeating sequences?"></a>How to create repeating sequences?</h2><p><strong>np.tile</strong> will repeat a whole list or array n times. Whereas, <strong>np.repeat</strong> repeats each item n times.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Repeat whole of 'a' two times</span></span><br><span class="line">print(<span class="string">'Tile:   '</span>, np.tile(a, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>Tile:    [1 2 3 1 2 3]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Repeat each element of 'a' two times</span></span><br><span class="line">print(<span class="string">'Repeat: '</span>, np.repeat(a, <span class="number">2</span>))</span><br></pre></td></tr></table></figure>
<pre><code>Repeat:  [1 1 2 2 3 3]
</code></pre><h2 id="How-to-create-a-new-array-from-an-existing-array"><a href="#How-to-create-a-new-array-from-an-existing-array" class="headerlink" title="How to create a new array from an existing array?"></a>How to create a new array from an existing array?</h2><p>If you just assign a portion of an array to another array, the new array you just created actually refers to the parent array in memory.</p>
<p>That means, if you make any changes to the new array, it will reflect in the parent array as well.</p>
<p>So to avoid disturbing the parent array, you need to make a copy of it using <strong>copy()</strong>. All numpy arrays come with the copy() method.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr2 = np.arange(<span class="number">15</span>).reshape((<span class="number">3</span>,<span class="number">5</span>))</span><br><span class="line">arr2a = arr2[:<span class="number">2</span>, :<span class="number">2</span>]</span><br><span class="line">arr2a[:<span class="number">1</span>, :<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[100,   1,   2,   3,   4],
       [  5,   6,   7,   8,   9],
       [ 10,  11,  12,  13,  14]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr2b = arr2[:<span class="number">2</span>, :<span class="number">2</span>].copy()</span><br><span class="line">arr2b[:<span class="number">1</span>, :<span class="number">1</span>] = <span class="number">101</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[100,   1,   2,   3,   4],
       [  5,   6,   7,   8,   9],
       [ 10,  11,  12,  13,  14]])
</code></pre><h2 id="How-to-create-a-sequence-of-dates"><a href="#How-to-create-a-sequence-of-dates" class="headerlink" title="How to create a sequence of dates?"></a>How to create a sequence of dates?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create date sequence</span></span><br><span class="line">dates = np.arange(np.datetime64(<span class="string">'2018-02-01'</span>), np.datetime64(<span class="string">'2018-02-10'</span>))</span><br><span class="line">print(dates)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if its a business day</span></span><br><span class="line">np.is_busday(dates)</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;2018-02-01&#39; &#39;2018-02-02&#39; &#39;2018-02-03&#39; &#39;2018-02-04&#39; &#39;2018-02-05&#39;
 &#39;2018-02-06&#39; &#39;2018-02-07&#39; &#39;2018-02-08&#39; &#39;2018-02-09&#39;]





array([ True,  True, False, False,  True,  True,  True,  True,  True])
</code></pre><h1 id="2-查询"><a href="#2-查询" class="headerlink" title="2.查询"></a>2.查询</h1><h2 id="How-to-inspect-the-size-and-shape-of-a-numpy-array"><a href="#How-to-inspect-the-size-and-shape-of-a-numpy-array" class="headerlink" title="How to inspect the size and shape of a numpy array?"></a>How to inspect the size and shape of a numpy array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">list2 = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>], [<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]]</span><br><span class="line">arr2 = np.array(list2, dtype=<span class="string">'float'</span>)</span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 2., 3., 4.],
       [3., 4., 5., 6.],
       [5., 6., 7., 8.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'Shape:\t'</span>,arr2.shape)</span><br><span class="line">print(<span class="string">'Datatype:\t'</span>,arr2.dtype)</span><br><span class="line">print(<span class="string">'Size:\t'</span>,arr2.size)</span><br><span class="line">print(<span class="string">'Num Dimensions'</span>,arr2.ndim)</span><br></pre></td></tr></table></figure>
<pre><code>Shape:     (3, 4)
Datatype:     float64
Size:     12
Num Dimensions 2
</code></pre><h2 id="How-to-compute-mean-min-max-on-the-ndarray"><a href="#How-to-compute-mean-min-max-on-the-ndarray" class="headerlink" title="How to compute mean, min, max on the ndarray?"></a>How to compute mean, min, max on the ndarray?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 2., 3., 4.],
       [3., 4., 5., 6.],
       [5., 6., 7., 8.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mean, max and min</span></span><br><span class="line">print(<span class="string">"Mean value is: "</span>, arr2.mean())</span><br><span class="line">print(<span class="string">"Max value is: "</span>, arr2.max())</span><br><span class="line">print(<span class="string">"Min value is: "</span>, arr2.min())</span><br></pre></td></tr></table></figure>
<pre><code>Mean value is:  4.5
Max value is:  8.0
Min value is:  1.0
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Row wise and column wise min</span></span><br><span class="line">print(<span class="string">"Column wise minimum: "</span>, np.amin(arr2, axis=<span class="number">0</span>))</span><br><span class="line">print(<span class="string">"Row wise minimum: "</span>, np.amin(arr2, axis=<span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<pre><code>Column wise minimum:  [1. 2. 3. 4.]
Row wise minimum:  [1. 3. 5.]
</code></pre><h2 id="How-to-extract-specific-items-from-an-array"><a href="#How-to-extract-specific-items-from-an-array" class="headerlink" title="How to extract specific items from an array?"></a>How to extract specific items from an array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 2., 3., 4.],
       [3., 4., 5., 6.],
       [5., 6., 7., 8.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2[:<span class="number">2</span>, :<span class="number">2</span>]</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 2.],
       [3., 4.]])
</code></pre><p>numpy arrays support <strong>boolean indexing</strong>.<br>A boolean index array is of the same shape as the array-to-be-filtered and it contains only True and False values. The values corresponding to True positions are retained in the output.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = arr2 &gt; <span class="number">4</span></span><br><span class="line">b</span><br></pre></td></tr></table></figure>
<pre><code>array([[False, False, False, False],
       [False, False,  True,  True],
       [ True,  True,  True,  True]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2[b]</span><br></pre></td></tr></table></figure>
<pre><code>array([5., 6., 5., 6., 7., 8.])
</code></pre><h2 id="How-to-extract-all-numbers-between-a-given-range-from-a-numpy-array"><a href="#How-to-extract-all-numbers-between-a-given-range-from-a-numpy-array" class="headerlink" title="How to extract all numbers between a given range from a numpy array?"></a>How to extract all numbers between a given range from a numpy array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Method 1</span></span><br><span class="line">index = np.where((a &gt;= <span class="number">5</span>) &amp; (a &lt;= <span class="number">10</span>))</span><br><span class="line">a[index]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Method 2:</span></span><br><span class="line">index = np.where(np.logical_and(a&gt;=<span class="number">5</span>, a&lt;=<span class="number">10</span>))</span><br><span class="line">a[index]</span><br><span class="line"><span class="comment">#&gt; (array([6, 9, 10]),)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Method 3: (thanks loganzk!)</span></span><br><span class="line">a[(a &gt;= <span class="number">5</span>) &amp; (a &lt;= <span class="number">10</span>)]</span><br></pre></td></tr></table></figure>
<pre><code>array([ 5,  6,  7,  8,  9, 10])
</code></pre><h2 id="How-to-reverse-the-rows-and-the-whole-array"><a href="#How-to-reverse-the-rows-and-the-whole-array" class="headerlink" title="How to reverse the rows and the whole array?|"></a>How to reverse the rows and the whole array?|</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 2., 3., 4.],
       [3., 4., 5., 6.],
       [5., 6., 7., 8.]])
</code></pre><p>Reverse only the row positions</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2[::<span class="number">-1</span>,]</span><br></pre></td></tr></table></figure>
<pre><code>array([[5., 6., 7., 8.],
       [3., 4., 5., 6.],
       [1., 2., 3., 4.]])
</code></pre><p>Reverse the row and column positions</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2[::<span class="number">-1</span>, ::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<pre><code>array([[8., 7., 6., 5.],
       [6., 5., 4., 3.],
       [4., 3., 2., 1.]])
</code></pre><h2 id="How-to-represent-missing-values-and-infinite"><a href="#How-to-represent-missing-values-and-infinite" class="headerlink" title="How to represent missing values and infinite?"></a>How to represent missing values and infinite?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr2[<span class="number">1</span>, <span class="number">1</span>] = np.nan <span class="comment"># not a number</span></span><br><span class="line">arr2[<span class="number">1</span>, <span class="number">2</span>] = np.inf <span class="comment"># infinite</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[ 1.,  2.,  3.,  4.],
       [ 3., nan, inf,  6.],
       [ 5.,  6.,  7.,  8.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">missing_bool = np.isnan(arr2) | np.isinf(arr2)</span><br><span class="line">missing_bool</span><br></pre></td></tr></table></figure>
<pre><code>array([[False, False, False, False],
       [False,  True,  True, False],
       [False, False, False, False]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr2[missing_bool] = <span class="number">-1</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[ 1.,  2.,  3.,  4.],
       [ 3., -1., -1.,  6.],
       [ 5.,  6.,  7.,  8.]])
</code></pre><h2 id="Reshaping-and-Flattening-Multidimensional-arrays"><a href="#Reshaping-and-Flattening-Multidimensional-arrays" class="headerlink" title="Reshaping and Flattening Multidimensional arrays"></a>Reshaping and Flattening Multidimensional arrays</h2><p><strong>flatten()</strong> or <strong>ravel()</strong><br>Reshaping is changing the arrangement of items so that shape of the array changes while maintaining the same number of dimensions.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Flatten it to a 1d array</span></span><br><span class="line">arr2.flatten()</span><br></pre></td></tr></table></figure>
<pre><code>array([ 1.,  2.,  3.,  4.,  3., -1., -1.,  6.,  5.,  6.,  7.,  8.])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr2.flatten().shape</span><br></pre></td></tr></table></figure>
<pre><code>(12,)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Changing the flattened array does not change parent</span></span><br><span class="line">b1 = arr2.flatten()</span><br><span class="line">b1[<span class="number">0</span>] = <span class="number">1000</span>  <span class="comment"># changing b1 does not affect arr2</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[ 1.,  2.,  3.,  4.],
       [ 3., -1., -1.,  6.],
       [ 5.,  6.,  7.,  8.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Changing the raveled array changes the parent also.</span></span><br><span class="line">b2 = arr2.ravel()  </span><br><span class="line">b2[<span class="number">0</span>] = <span class="number">101</span>  <span class="comment"># changing b2 changes arr2 also</span></span><br><span class="line">arr2</span><br></pre></td></tr></table></figure>
<pre><code>array([[101.,   2.,   3.,   4.],
       [  3.,  -1.,  -1.,   6.],
       [  5.,   6.,   7.,   8.]])
</code></pre><h2 id="How-to-get-the-unique-items-and-the-counts"><a href="#How-to-get-the-unique-items-and-the-counts" class="headerlink" title="How to get the unique items and the counts?"></a>How to get the unique items and the counts?</h2><p>The <strong>np.unique</strong> method can be used to get the unique items. If you want the repetition counts of each item, set the return_counts parameter to True.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create random integers of size 10 between [0,10)</span></span><br><span class="line">np.random.seed(<span class="number">100</span>)</span><br><span class="line">arr_rand = np.random.randint(<span class="number">0</span>, <span class="number">10</span>, size=<span class="number">10</span>)</span><br><span class="line">print(arr_rand)</span><br></pre></td></tr></table></figure>
<pre><code>[8 8 3 7 7 0 4 2 5 2]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get the unique items and their counts</span></span><br><span class="line">uniqs, counts = np.unique(arr_rand, return_counts=<span class="keyword">True</span>)</span><br><span class="line">print(<span class="string">"Unique items : "</span>, uniqs)</span><br><span class="line">print(<span class="string">"Counts       : "</span>, counts)</span><br></pre></td></tr></table></figure>
<pre><code>Unique items :  [0 2 3 4 5 7 8]
Counts       :  [1 2 1 1 1 2 2]
</code></pre><h2 id="How-to-get-index-locations-that-satisfy-a-given-condition-using-np-where"><a href="#How-to-get-index-locations-that-satisfy-a-given-condition-using-np-where" class="headerlink" title="How to get index locations that satisfy a given condition using np.where?"></a>How to get index locations that satisfy a given condition using np.where?</h2><p>Previously you saw how to extract items from an array that satisfy a given condition. Boolean indexing, remember?</p>
<p>But sometimes we want to know the index positions of the items (that satisfy a condition) and do whatever you want with it.</p>
<p><strong>np.where</strong> locates the positions in the array where a given condition holds true.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr_rand = np.array([<span class="number">8</span>, <span class="number">8</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">7</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">2</span>])</span><br><span class="line">print(<span class="string">"Array: "</span>, arr_rand)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Positions where value &gt; 5</span></span><br><span class="line">index_gt5 = np.where(arr_rand &gt; <span class="number">5</span>)</span><br><span class="line">print(<span class="string">"Positions where value &gt; 5: "</span>, index_gt5)</span><br></pre></td></tr></table></figure>
<pre><code>Array:  [8 8 3 7 7 0 4 2 5 2]
Positions where value &gt; 5:  (array([0, 1, 3, 4], dtype=int64),)
</code></pre><p>Once you have the positions, you can extract them using the array’s take method.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Take items at given index</span></span><br><span class="line">arr_rand.take(index_gt5)</span><br></pre></td></tr></table></figure>
<pre><code>array([[8, 8, 7, 7]])
</code></pre><p>Thankfully, np.where also accepts 2 more optional arguments x and y. Whenever condition is true, ‘x’ is yielded else ‘y’.</p>
<p>Below, I try to create an array that will have the string ‘gt5’ whenever the condition is true, else, it will have ‘lt5’.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If value &gt; 5, then yield 'gt5' else 'le5'</span></span><br><span class="line">np.where(arr_rand &gt; <span class="number">5</span>, <span class="string">'gt5'</span>, <span class="string">'le5'</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([&#39;gt5&#39;, &#39;gt5&#39;, &#39;le5&#39;, &#39;gt5&#39;, &#39;gt5&#39;, &#39;le5&#39;, &#39;le5&#39;, &#39;le5&#39;, &#39;le5&#39;,
       &#39;le5&#39;], dtype=&#39;&lt;U3&#39;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># If value &gt; 5, then yield arr_rand else 0</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.where(arr_rand &gt; <span class="number">5</span>, arr_rand, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([8, 8, 0, 7, 7, 0, 0, 0, 0, 0])
</code></pre><p>Let’s find the location of the maximum and minimum valjues as well.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Location of the max</span></span><br><span class="line">print(<span class="string">'Position of max value: '</span>, np.argmax(arr_rand))  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Location of the min</span></span><br><span class="line">print(<span class="string">'Position of min value: '</span>, np.argmin(arr_rand))</span><br></pre></td></tr></table></figure>
<pre><code>Position of max value:  0
Position of min value:  5
</code></pre><h1 id="3-操作"><a href="#3-操作" class="headerlink" title="3.操作"></a>3.操作</h1><h2 id="连接"><a href="#连接" class="headerlink" title="连接"></a>连接</h2><hr>
<h2 id="How-to-concatenate-two-numpy-arrays-columnwise-and-row-wise"><a href="#How-to-concatenate-two-numpy-arrays-columnwise-and-row-wise" class="headerlink" title="How to concatenate two numpy arrays columnwise and row wise"></a>How to concatenate two numpy arrays columnwise and row wise</h2><p>There are 3 different ways of concatenating two or more numpy arrays.</p>
<ul>
<li>Method 1: <strong>np.concatenate</strong> by changing the axis parameter to 0 and 1</li>
<li>Method 2: <strong>np.vstack</strong> and <strong>np.hstack</strong></li>
<li>Method 3: <strong>np.r_</strong> and <strong>np.c_</strong>  </li>
</ul>
<p>All three methods provide the same output.</p>
<p>One key difference to notice is unlike the other 2 methods, both np.r_ and np.c_ use <strong>square brackets</strong> to stack arrays. But first, let me create the arrays to be concatenated.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.zeros([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">b = np.ones([<span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">print(<span class="string">'a:\n'</span>,a)</span><br><span class="line">print(<span class="string">'b:\n'</span>,b)</span><br></pre></td></tr></table></figure>
<pre><code>a:
 [[0. 0. 0.]
 [0. 0. 0.]]
b:
 [[1. 1. 1.]
 [1. 1. 1.]]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Vertical Stack Equivalents (Row wise)</span></span><br><span class="line">np.concatenate([a, b], axis=<span class="number">0</span>)  </span><br><span class="line">np.vstack([a,b])  </span><br><span class="line">np.r_[a,b]</span><br></pre></td></tr></table></figure>
<pre><code>array([[0., 0., 0.],
       [0., 0., 0.],
       [1., 1., 1.],
       [1., 1., 1.]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Horizontal Stack Equivalents (Coliumn wise)</span></span><br><span class="line">np.concatenate([a, b], axis=<span class="number">1</span>) </span><br><span class="line">np.hstack([a,b])  </span><br><span class="line">np.c_[a,b]</span><br></pre></td></tr></table></figure>
<pre><code>array([[0., 0., 0., 1., 1., 1.],
       [0., 0., 0., 1., 1., 1.]])
</code></pre><p>Besides, you can use np.r_ to create more complex number sequences in 1d arrays.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.r_[[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], <span class="number">0</span>, <span class="number">0</span>, [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]]</span><br></pre></td></tr></table></figure>
<pre><code>array([1, 2, 3, 0, 0, 4, 5, 6])
</code></pre><h2 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h2><hr>
<h2 id="How-to-sort-a-numpy-array-based-on-one-or-more-columns"><a href="#How-to-sort-a-numpy-array-based-on-one-or-more-columns" class="headerlink" title="How to sort a numpy array based on one or more columns?"></a>How to sort a numpy array based on one or more columns?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randint(<span class="number">1</span>,<span class="number">6</span>, size=[<span class="number">3</span>, <span class="number">5</span>])</span><br><span class="line">arr</span><br></pre></td></tr></table></figure>
<pre><code>array([[3, 3, 2, 1, 1],
       [5, 4, 5, 3, 1],
       [4, 2, 3, 4, 5]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sort each columns of arr</span></span><br><span class="line">np.sort(arr, axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([[3, 2, 2, 1, 1],
       [4, 3, 3, 3, 1],
       [5, 4, 5, 4, 5]])
</code></pre><h2 id="How-to-sort-a-numpy-array-based-on-1-column-using-argsort"><a href="#How-to-sort-a-numpy-array-based-on-1-column-using-argsort" class="headerlink" title="How to sort a numpy array based on 1 column using argsort?"></a>How to sort a numpy array based on 1 column using argsort?</h2><p><strong>np.argsort</strong> returns the index positions of that would make a given 1d array sorted.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get the index positions that would sort the array</span></span><br><span class="line">x = np.array([<span class="number">1</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line">sort_index = np.argsort(x)</span><br><span class="line">print(sort_index)</span><br></pre></td></tr></table></figure>
<pre><code>[0 3 2 4 5 1]
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x[sort_index]</span><br></pre></td></tr></table></figure>
<pre><code>array([ 1,  2,  5,  8,  9, 10])
</code></pre><p>Now, in order to sort the original arr, I am going to do an argsort on the 1st column and use the resulting index positions to sort arr. See the code.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Argsort the first column</span></span><br><span class="line">sorted_index_1stcol = arr[:, <span class="number">0</span>].argsort()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sort 'arr' by first column without disturbing the integrity of rows</span></span><br><span class="line">arr[sorted_index_1stcol]</span><br></pre></td></tr></table></figure>
<pre><code>array([[3, 3, 2, 1, 1],
       [4, 2, 3, 4, 5],
       [5, 4, 5, 3, 1]])
</code></pre><p>To sort it in decreasing order, simply reverse the argsorted index.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Descending sort</span></span><br><span class="line">arr[sorted_index_1stcol[::<span class="number">-1</span>]]</span><br></pre></td></tr></table></figure>
<pre><code>array([[5, 4, 5, 3, 1],
       [4, 2, 3, 4, 5],
       [3, 3, 2, 1, 1]])
</code></pre><h2 id="How-to-sort-a-numpy-array-based-on-2-or-more-columns"><a href="#How-to-sort-a-numpy-array-based-on-2-or-more-columns" class="headerlink" title="How to sort a numpy array based on 2 or more columns?"></a>How to sort a numpy array based on 2 or more columns?</h2><ul>
<li><p>You can do this using <strong>np.lexsort</strong> by passing a tuple of columns based on which the array should be sorted.</p>
</li>
<li><p>Just remember to place the column to be <strong>sorted first at the rightmost side</strong> inside the tuple.</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Sort by column 0, then by column 1</span></span><br><span class="line">lexsorted_index = np.lexsort((arr[:, <span class="number">1</span>], arr[:, <span class="number">0</span>])) </span><br><span class="line">arr[lexsorted_index]</span><br></pre></td></tr></table></figure>
<pre><code>array([[3, 3, 2, 1, 1],
       [4, 2, 3, 4, 5],
       [5, 4, 5, 3, 1]])
</code></pre><h2 id="改变行列顺序"><a href="#改变行列顺序" class="headerlink" title="改变行列顺序"></a>改变行列顺序</h2><hr>
<h2 id="How-to-swap-two-columns-in-a-2d-numpy-array"><a href="#How-to-swap-two-columns-in-a-2d-numpy-array" class="headerlink" title="How to swap two columns in a 2d numpy array?"></a>How to swap two columns in a 2d numpy array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Input</span></span><br><span class="line">arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">print(<span class="string">'arr:\n'</span>,arr)</span><br><span class="line"><span class="comment"># Solution</span></span><br><span class="line">print(<span class="string">'after change:\n'</span>,arr[:, [<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>]])</span><br></pre></td></tr></table></figure>
<pre><code>arr:
 [[0 1 2]
 [3 4 5]
 [6 7 8]]
after change:
 [[1 0 2]
 [4 3 5]
 [7 6 8]]
</code></pre><h2 id="How-to-swap-two-rows-in-a-2d-numpy-array"><a href="#How-to-swap-two-rows-in-a-2d-numpy-array" class="headerlink" title="How to swap two rows in a 2d numpy array?"></a>How to swap two rows in a 2d numpy array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Input</span></span><br><span class="line">arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">print(<span class="string">'arr:\n'</span>,arr)</span><br><span class="line"><span class="comment"># Solution</span></span><br><span class="line">print(<span class="string">'after change:\n'</span>,arr[[<span class="number">1</span>,<span class="number">0</span>,<span class="number">2</span>], :])</span><br></pre></td></tr></table></figure>
<pre><code>arr:
 [[0 1 2]
 [3 4 5]
 [6 7 8]]
after change:
 [[3 4 5]
 [0 1 2]
 [6 7 8]]
</code></pre><h2 id="How-to-reverse-the-rows-of-a-2D-array"><a href="#How-to-reverse-the-rows-of-a-2D-array" class="headerlink" title="How to reverse the rows of a 2D array?"></a>How to reverse the rows of a 2D array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Input</span></span><br><span class="line">arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">print(<span class="string">'arr:\n'</span>,arr)</span><br><span class="line"><span class="comment"># Solution</span></span><br><span class="line">print(<span class="string">'after change:\n'</span>,arr[::<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
<pre><code>arr:
 [[0 1 2]
 [3 4 5]
 [6 7 8]]
after change:
 [[6 7 8]
 [3 4 5]
 [0 1 2]]
</code></pre><h2 id="How-to-reverse-the-columns-of-a-2D-array"><a href="#How-to-reverse-the-columns-of-a-2D-array" class="headerlink" title="How to reverse the columns of a 2D array?"></a>How to reverse the columns of a 2D array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Input</span></span><br><span class="line">arr = np.arange(<span class="number">9</span>).reshape(<span class="number">3</span>,<span class="number">3</span>)</span><br><span class="line">print(<span class="string">'arr:\n'</span>,arr)</span><br><span class="line"><span class="comment"># Solution</span></span><br><span class="line">print(<span class="string">'after change:\n'</span>,arr[:, ::<span class="number">-1</span>])</span><br></pre></td></tr></table></figure>
<pre><code>arr:
 [[0 1 2]
 [3 4 5]
 [6 7 8]]
after change:
 [[2 1 0]
 [5 4 3]
 [8 7 6]]
</code></pre><h2 id="增加维度"><a href="#增加维度" class="headerlink" title="增加维度"></a>增加维度</h2><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a 1D array</span></span><br><span class="line">x = np.arange(<span class="number">5</span>)</span><br><span class="line">print(<span class="string">'Original array: '</span>, x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Introduce a new column axis</span></span><br><span class="line">x_col = x[:, np.newaxis]</span><br><span class="line">print(<span class="string">'x_col shape: '</span>, x_col.shape)</span><br><span class="line">print(x_col)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Introduce a new row axis</span></span><br><span class="line">x_row = x[np.newaxis, :]</span><br><span class="line">print(<span class="string">'x_row shape: '</span>, x_row.shape)</span><br><span class="line">print(x_row)</span><br></pre></td></tr></table></figure>
<pre><code>Original array:  [0 1 2 3 4]
x_col shape:  (5, 1)
[[0]
 [1]
 [2]
 [3]
 [4]]
x_row shape:  (1, 5)
[[0 1 2 3 4]]
</code></pre><h2 id="集合运算"><a href="#集合运算" class="headerlink" title="集合运算"></a>集合运算</h2><hr>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>])</span><br><span class="line">b = np.array([<span class="number">7</span>,<span class="number">2</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">9</span>,<span class="number">8</span>])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.intersect1d(a,b)</span><br></pre></td></tr></table></figure>
<pre><code>array([2, 4])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.setdiff1d(a,b)</span><br></pre></td></tr></table></figure>
<pre><code>array([1, 3, 5, 6])
</code></pre><h2 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h2><hr>
<h2 id="vectorize-–-Make-a-scalar-function-work-on-vectors"><a href="#vectorize-–-Make-a-scalar-function-work-on-vectors" class="headerlink" title="vectorize – Make a scalar function work on vectors"></a>vectorize – Make a scalar function work on vectors</h2><p>With the help of <strong>vectorize()</strong> you can make a function that is meant to work on individual numbers, to work on arrays.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define a scalar function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> x % <span class="number">2</span> == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> x**<span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x/<span class="number">2</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Vectorize foo(). Make it work on vectors.</span></span><br><span class="line">foo_v = np.vectorize(foo, otypes=[float])</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(<span class="string">'x = [10, 11, 12] returns '</span>, foo_v([<span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]))</span><br></pre></td></tr></table></figure>
<pre><code>x = [10, 11, 12] returns  [  5. 121.   6.]
</code></pre><h2 id="apply-along-axis-–-Apply-a-function-column-wise-or-row-wise"><a href="#apply-along-axis-–-Apply-a-function-column-wise-or-row-wise" class="headerlink" title="apply_along_axis – Apply a function column wise or row wise"></a>apply_along_axis – Apply a function column wise or row wise</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create a 4x10 random array</span></span><br><span class="line">np.random.seed(<span class="number">100</span>)</span><br><span class="line">arr_x = np.random.randint(<span class="number">1</span>,<span class="number">10</span>,size=[<span class="number">4</span>,<span class="number">10</span>])</span><br><span class="line">arr_x</span><br></pre></td></tr></table></figure>
<pre><code>array([[9, 9, 4, 8, 8, 1, 5, 3, 6, 3],
       [3, 3, 2, 1, 9, 5, 1, 7, 3, 5],
       [2, 6, 4, 5, 5, 4, 8, 2, 2, 8],
       [8, 1, 3, 4, 3, 6, 9, 2, 1, 8]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define func1d</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">max_minus_min</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.max(x) - np.min(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply along the rows</span></span><br><span class="line">print(<span class="string">'Row wise: '</span>, np.apply_along_axis(max_minus_min, <span class="number">1</span>, arr=arr_x))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Apply along the columns</span></span><br><span class="line">print(<span class="string">'Column wise: '</span>, np.apply_along_axis(max_minus_min, <span class="number">0</span>, arr=arr_x))</span><br></pre></td></tr></table></figure>
<pre><code>Row wise:  [8 8 6 8]
Column wise:  [7 8 2 7 6 5 8 5 5 5]
</code></pre><p>为了更好看维度变化关系，下面在3维数组上进行操作</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D = np.random.randint(<span class="number">1</span>,<span class="number">10</span>,size=[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">arr_x_3D</span><br></pre></td></tr></table></figure>
<pre><code>array([[[7, 3, 1, 9, 3],
        [6, 2, 9, 2, 6],
        [5, 3, 9, 4, 6],
        [1, 4, 7, 4, 5]],

       [[8, 7, 4, 1, 5],
        [5, 6, 8, 7, 7],
        [3, 5, 3, 8, 2],
        [7, 7, 1, 8, 3]],

       [[4, 6, 5, 3, 5],
        [4, 8, 1, 1, 6],
        [7, 7, 6, 7, 5],
        [8, 4, 3, 4, 9]]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Apply along the rows</span></span><br><span class="line">B =  np.apply_along_axis(max_minus_min, <span class="number">1</span>, arr=arr_x_3D)</span><br><span class="line">print(<span class="string">'Row wise: '</span>, B)</span><br><span class="line">print(<span class="string">'output shape:'</span>, B.shape)</span><br></pre></td></tr></table></figure>
<pre><code>Row wise:  [[6 2 8 7 3]
 [5 2 7 7 5]
 [4 4 5 6 4]]
output shape: (3, 5)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Apply along the rows</span></span><br><span class="line">C =  np.apply_along_axis(max_minus_min, <span class="number">2</span>, arr=arr_x_3D)</span><br><span class="line">print(<span class="string">'Row wise: '</span>, C)</span><br><span class="line">print(<span class="string">'output shape:'</span>, C.shape)</span><br></pre></td></tr></table></figure>
<pre><code>Row wise:  [[8 7 6 6]
 [7 3 6 7]
 [3 7 2 6]]
output shape: (3, 4)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C_add_axis = C[:,:,np.newaxis]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C_add_axis</span><br></pre></td></tr></table></figure>
<pre><code>array([[[8],
        [7],
        [6],
        [6]],

       [[7],
        [3],
        [6],
        [7]],

       [[3],
        [7],
        [2],
        [6]]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D - C_add_axis</span><br></pre></td></tr></table></figure>
<pre><code>array([[[-1, -5, -7,  1, -5],
        [-1, -5,  2, -5, -1],
        [-1, -3,  3, -2,  0],
        [-5, -2,  1, -2, -1]],

       [[ 1,  0, -3, -6, -2],
        [ 2,  3,  5,  4,  4],
        [-3, -1, -3,  2, -4],
        [ 0,  0, -6,  1, -4]],

       [[ 1,  3,  2,  0,  2],
        [-3,  1, -6, -6, -1],
        [ 5,  5,  4,  5,  3],
        [ 2, -2, -3, -2,  3]]])
</code></pre><h2 id="广播机制"><a href="#广播机制" class="headerlink" title="广播机制"></a>广播机制</h2><hr>
<p>利用广播机制把三维矩阵特征列数据规范化。<br>特征列减去该列的均值再除以该列的方差，结果是使特征列的数据均值为0.方差为1的分布。<br>三维的意义是：批次 <em> 小批量样本数 </em> 特征向量 </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D = np.random.randint(<span class="number">1</span>,<span class="number">10</span>,size=[<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>])</span><br><span class="line">arr_x_3D</span><br></pre></td></tr></table></figure>
<pre><code>array([[[8, 2, 6, 4, 1],
        [7, 3, 4, 5, 9],
        [9, 6, 3, 8, 6],
        [1, 9, 7, 3, 1]],

       [[6, 4, 3, 4, 7],
        [5, 2, 4, 2, 5],
        [9, 9, 3, 3, 8],
        [3, 2, 3, 8, 2]],

       [[1, 6, 4, 6, 3],
        [7, 2, 2, 6, 3],
        [6, 7, 5, 7, 8],
        [8, 4, 1, 3, 6]]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_c_mean = np.mean(arr_x_3D, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_c_mean = arr_x_3D_c_mean[:,np.newaxis,:]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_1 = arr_x_3D - arr_x_3D_c_mean</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_c_var = np.std(arr_x_3D, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_c_var = arr_x_3D_c_var[:,np.newaxis,:]</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr_x_3D_2 = arr_x_3D_1 / arr_x_3D_c_var</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.mean(arr_x_3D_2, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([[-5.55e-17,  0.00e+00,  0.00e+00,  0.00e+00,  2.78e-17],
       [-5.55e-17,  0.00e+00, -5.55e-17, -5.55e-17,  0.00e+00],
       [-2.78e-17,  1.39e-17,  0.00e+00, -5.55e-17, -1.39e-17]])
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.std(arr_x_3D_2, axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([[1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.],
       [1., 1., 1., 1., 1.]])
</code></pre><h2 id="一些有用函数"><a href="#一些有用函数" class="headerlink" title="一些有用函数"></a>一些有用函数</h2><hr>
<p>分箱 Use <strong>np.digitize</strong> to return the index position of the bin each element belongs to.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create the array and bins</span></span><br><span class="line">x = np.arange(<span class="number">10</span>)</span><br><span class="line">bins = np.array([<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get bin allotments</span></span><br><span class="line">np.digitize(x, bins)</span><br></pre></td></tr></table></figure>
<pre><code>array([1, 1, 1, 2, 2, 2, 3, 3, 3, 4], dtype=int64)
</code></pre><p>切片<br>Use <strong>np.clip</strong> to cap the numbers within a given cutoff range. All number lesser than the lower limit will be replaced by the lower limit. Same applies to the upper limit also.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Cap all elements of x to lie between 3 and 8</span></span><br><span class="line">np.clip(x, <span class="number">3</span>, <span class="number">8</span>)</span><br></pre></td></tr></table></figure>
<pre><code>array([3, 3, 3, 3, 4, 5, 6, 7, 8, 8])
</code></pre><p>计数 <strong>np.bincount(x)</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bincount example</span></span><br><span class="line">x = np.array([<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">6</span>]) <span class="comment"># doesn't need to be sorted</span></span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.bincount(x)  <span class="comment"># 0 occurs 0 times, 1 occurs 2 times, 2 occurs thrice, 3 occurs 0 times,...</span></span><br></pre></td></tr></table></figure>
<pre><code>array([0, 2, 3, 0, 2, 1, 3], dtype=int64)
</code></pre><h1 id="4-存取"><a href="#4-存取" class="headerlink" title="4.存取"></a>4.存取</h1><h2 id="How-to-import-and-export-data-as-a-csv-file"><a href="#How-to-import-and-export-data-as-a-csv-file" class="headerlink" title="How to import and export data as a csv file?"></a>How to import and export data as a csv file?</h2><p>A standard way to import datasets is to use the np.genfromtxt function. It can import datasets from web URLs, handle missing values, multiple delimiters, handle irregular number of columns etc.</p>
<p>A less versatile version is the <strong>np.loadtxt</strong> which assumes the dataset has no missing values.</p>
<p>As an example, let’s try to read a .csv file from the below URL. Since all elements in a numpy array should be of the same data type, the last column which is a text will be imported as a ‘nan’ by default.</p>
<p>By setting the filling_values argument you can replace the missing values with something else.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Turn off scientific notation</span></span><br><span class="line">np.set_printoptions(suppress=<span class="keyword">True</span>)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Import data from csv file url</span></span><br><span class="line">path = <span class="string">'https://raw.githubusercontent.com/selva86/datasets/master/Auto.csv'</span></span><br><span class="line">data = np.genfromtxt(path, delimiter=<span class="string">','</span>, skip_header=<span class="number">1</span>, filling_values=<span class="number">-999</span>, dtype=<span class="string">'float'</span>)</span><br><span class="line">data[:<span class="number">5</span>]  <span class="comment"># see first 3 rows</span></span><br></pre></td></tr></table></figure>
<pre><code>array([[  18. ,    8. ,  307. ,  130. , 3504. ,   12. ,   70. ,    1. ,
        -999. ],
       [  15. ,    8. ,  350. ,  165. , 3693. ,   11.5,   70. ,    1. ,
        -999. ],
       [  18. ,    8. ,  318. ,  150. , 3436. ,   11. ,   70. ,    1. ,
        -999. ],
       [  16. ,    8. ,  304. ,  150. , 3433. ,   12. ,   70. ,    1. ,
        -999. ],
       [  17. ,    8. ,  302. ,  140. , 3449. ,   10.5,   70. ,    1. ,
        -999. ]])
</code></pre><p>That was neat. But did you notice all the values in last column has the same value ‘-999’?</p>
<p>That happened because, I had mentioned the. <code>dtype=’float’</code>. The last column in the file contained text values and since all the values in a numpy array has to be of the same <code>dtype</code>, <code>np.genfromtxt</code> didn’t know how to convert it to a float.</p>
<h2 id="How-to-handle-datasets-that-has-both-numbers-and-text-columns"><a href="#How-to-handle-datasets-that-has-both-numbers-and-text-columns" class="headerlink" title="How to handle datasets that has both numbers and text columns?"></a>How to handle datasets that has both numbers and text columns?</h2><p>In case, you MUST have the text column as it is without replacing it with a placeholder, you can either set the dtype as ‘object’ or as None.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># data2 = np.genfromtxt(path, delimiter=',', skip_header=1, dtype='object')</span></span><br><span class="line">data2 = np.genfromtxt(path, delimiter=<span class="string">','</span>, skip_header=<span class="number">1</span>, dtype=<span class="keyword">None</span>)</span><br><span class="line">data2[:<span class="number">3</span>]  <span class="comment"># see first 3 rows</span></span><br></pre></td></tr></table></figure>
<pre><code>D:\Anaconda3\envs\gluon\lib\site-packages\ipykernel_launcher.py:2: VisibleDeprecationWarning: Reading unicode strings without specifying the encoding argument is deprecated. Set the encoding, use None for the system default.






array([(18., 8, 307., 130, 3504, 12. , 70, 1, b&#39;&quot;chevrolet chevelle malibu&quot;&#39;),
       (15., 8, 350., 165, 3693, 11.5, 70, 1, b&#39;&quot;buick skylark 320&quot;&#39;),
       (18., 8, 318., 150, 3436, 11. , 70, 1, b&#39;&quot;plymouth satellite&quot;&#39;)],
      dtype=[(&#39;f0&#39;, &#39;&lt;f8&#39;), (&#39;f1&#39;, &#39;&lt;i4&#39;), (&#39;f2&#39;, &#39;&lt;f8&#39;), (&#39;f3&#39;, &#39;&lt;i4&#39;), (&#39;f4&#39;, &#39;&lt;i4&#39;), (&#39;f5&#39;, &#39;&lt;f8&#39;), (&#39;f6&#39;, &#39;&lt;i4&#39;), (&#39;f7&#39;, &#39;&lt;i4&#39;), (&#39;f8&#39;, &#39;S38&#39;)])
</code></pre><p>Finally, ‘np.savetxt’ lets you export the array as a csv file.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Save the array as a csv file</span></span><br><span class="line">np.savetxt(<span class="string">"out.csv"</span>, data, delimiter=<span class="string">","</span>)</span><br></pre></td></tr></table></figure>
<h2 id="How-to-save-and-load-numpy-objects"><a href="#How-to-save-and-load-numpy-objects" class="headerlink" title="How to save and load numpy objects?"></a>How to save and load numpy objects?</h2><p>At some point, we will want to save large transformed numpy arrays to disk and load it back to console directly without having the re-run the data transformations code.</p>
<p>Numpy provides the .npy and the .npz file types for this purpose.</p>
<p>If you want to store a single ndarray object, store it as a .npy file using np.save. This can be loaded back using the <strong>np.load</strong>.</p>
<p>If you want to store more than 1 ndarray object in a single file, then save it as a .npz file using <strong>np.savez</strong>.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Save single numpy array object as .npy file</span></span><br><span class="line">np.save(<span class="string">'myarray.npy'</span>, arr2d)  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Save multile numy arrays as a .npz file</span></span><br><span class="line">np.savez(<span class="string">'array.npz'</span>, arr2d_f, arr2d_b)</span><br></pre></td></tr></table></figure>
<p>Load back the .npy file.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load a .npy file</span></span><br><span class="line">a = np.load(<span class="string">'myarray.npy'</span>)</span><br><span class="line">print(a)</span><br></pre></td></tr></table></figure>
<pre><code>[[0 1 2]
 [3 4 5]
 [6 7 8]]
</code></pre><p>Load back the .npz file.</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load a .npz file</span></span><br><span class="line">b = np.load(<span class="string">'array.npz'</span>)</span><br><span class="line">print(b.files)</span><br><span class="line">b[<span class="string">'arr_0'</span>]</span><br></pre></td></tr></table></figure>
<pre><code>[&#39;arr_0&#39;, &#39;arr_1&#39;]





array([[0., 1., 2.],
       [3., 4., 5.],
       [6., 7., 8.]])
</code></pre><h1 id="5-其他"><a href="#5-其他" class="headerlink" title="5.其他"></a>5.其他</h1><h2 id="Import-numpy-as-np-and-see-the-version"><a href="#Import-numpy-as-np-and-see-the-version" class="headerlink" title="Import numpy as np and see the version"></a>Import numpy as np and see the version</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(np.__version__)</span><br></pre></td></tr></table></figure>
<pre><code>1.14.3
</code></pre><h2 id="How-to-extract-items-that-satisfy-a-given-condition-from-1D-array"><a href="#How-to-extract-items-that-satisfy-a-given-condition-from-1D-array" class="headerlink" title="How to extract items that satisfy a given condition from 1D array?"></a>How to extract items that satisfy a given condition from 1D array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Input</span></span><br><span class="line">arr = np.array([<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>])</span><br><span class="line"><span class="comment"># Solution</span></span><br><span class="line">arr[arr % <span class="number">2</span> == <span class="number">1</span>]</span><br></pre></td></tr></table></figure>
<pre><code>array([1, 3, 5, 7, 9])
</code></pre><h2 id="How-to-replace-items-that-satisfy-a-condition-with-another-value-in-numpy-array"><a href="#How-to-replace-items-that-satisfy-a-condition-with-another-value-in-numpy-array" class="headerlink" title="How to replace items that satisfy a condition with another value in numpy array?"></a>How to replace items that satisfy a condition with another value in numpy array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr[arr % <span class="number">2</span> == <span class="number">1</span>] = <span class="number">-1</span></span><br><span class="line">arr</span><br></pre></td></tr></table></figure>
<pre><code>array([ 0, -1,  2, -1,  4, -1,  6, -1,  8, -1])
</code></pre><h2 id="How-to-replace-items-that-satisfy-a-condition-without-affecting-the-original-array"><a href="#How-to-replace-items-that-satisfy-a-condition-without-affecting-the-original-array" class="headerlink" title="How to replace items that satisfy a condition without affecting the original array?"></a>How to replace items that satisfy a condition without affecting the original array?</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(<span class="number">10</span>)</span><br><span class="line">out = np.where(arr % <span class="number">2</span> == <span class="number">1</span>, <span class="number">-1</span>, arr)</span><br><span class="line">print(arr)</span><br><span class="line">out</span><br></pre></td></tr></table></figure>
<pre><code>[0 1 2 3 4 5 6 7 8 9]





array([ 0, -1,  2, -1,  4, -1,  6, -1,  8, -1])
</code></pre>
      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>感谢金主！</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="望江车神 微信支付"/>
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="望江车神 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/numpy/" rel="tag"># numpy</a>
          
            <a href="/tags/python/" rel="tag"># python</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/06/09/LATEX学习手册1.0版/" rel="next" title="LATEX学习手册1.0版">
                <i class="fa fa-chevron-left"></i> LATEX学习手册1.0版
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/06/17/使用神经网络识别手写数字——感知器/" rel="prev" title="使用神经网络识别手写数字——感知器">
                使用神经网络识别手写数字——感知器 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://avatars0.githubusercontent.com/u/16183570?s=400&u=5e09ebb784cfd47de99d249f2be2413adcf4e672&v=4"
                alt="望江车神" />
            
              <p class="site-author-name" itemprop="name">望江车神</p>
              <p class="site-description motion-element" itemprop="description">深度学习你~~~</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">22</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">35</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/yuanxiaoSC" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-创建"><span class="nav-number">1.</span> <span class="nav-text">1.创建</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-a-numpy-array"><span class="nav-number">1.1.</span> <span class="nav-text">How to create a numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-sequences-repetitions-and-random-numbers-using-numpy"><span class="nav-number">1.2.</span> <span class="nav-text">How to create sequences, repetitions and random numbers using numpy?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-a-2D-array-containing-random-floats-between-5-and-10"><span class="nav-number">1.3.</span> <span class="nav-text">How to create a 2D array containing random floats between 5 and 10?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-generate-random-numbers"><span class="nav-number">1.4.</span> <span class="nav-text">How to generate random numbers?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-repeating-sequences"><span class="nav-number">1.5.</span> <span class="nav-text">How to create repeating sequences?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-a-new-array-from-an-existing-array"><span class="nav-number">1.6.</span> <span class="nav-text">How to create a new array from an existing array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-create-a-sequence-of-dates"><span class="nav-number">1.7.</span> <span class="nav-text">How to create a sequence of dates?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-查询"><span class="nav-number">2.</span> <span class="nav-text">2.查询</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-inspect-the-size-and-shape-of-a-numpy-array"><span class="nav-number">2.1.</span> <span class="nav-text">How to inspect the size and shape of a numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-compute-mean-min-max-on-the-ndarray"><span class="nav-number">2.2.</span> <span class="nav-text">How to compute mean, min, max on the ndarray?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-extract-specific-items-from-an-array"><span class="nav-number">2.3.</span> <span class="nav-text">How to extract specific items from an array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-extract-all-numbers-between-a-given-range-from-a-numpy-array"><span class="nav-number">2.4.</span> <span class="nav-text">How to extract all numbers between a given range from a numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-reverse-the-rows-and-the-whole-array"><span class="nav-number">2.5.</span> <span class="nav-text">How to reverse the rows and the whole array?|</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-represent-missing-values-and-infinite"><span class="nav-number">2.6.</span> <span class="nav-text">How to represent missing values and infinite?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reshaping-and-Flattening-Multidimensional-arrays"><span class="nav-number">2.7.</span> <span class="nav-text">Reshaping and Flattening Multidimensional arrays</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-get-the-unique-items-and-the-counts"><span class="nav-number">2.8.</span> <span class="nav-text">How to get the unique items and the counts?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-get-index-locations-that-satisfy-a-given-condition-using-np-where"><span class="nav-number">2.9.</span> <span class="nav-text">How to get index locations that satisfy a given condition using np.where?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-操作"><span class="nav-number">3.</span> <span class="nav-text">3.操作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#连接"><span class="nav-number">3.1.</span> <span class="nav-text">连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-concatenate-two-numpy-arrays-columnwise-and-row-wise"><span class="nav-number">3.2.</span> <span class="nav-text">How to concatenate two numpy arrays columnwise and row wise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#排序"><span class="nav-number">3.3.</span> <span class="nav-text">排序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-sort-a-numpy-array-based-on-one-or-more-columns"><span class="nav-number">3.4.</span> <span class="nav-text">How to sort a numpy array based on one or more columns?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-sort-a-numpy-array-based-on-1-column-using-argsort"><span class="nav-number">3.5.</span> <span class="nav-text">How to sort a numpy array based on 1 column using argsort?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-sort-a-numpy-array-based-on-2-or-more-columns"><span class="nav-number">3.6.</span> <span class="nav-text">How to sort a numpy array based on 2 or more columns?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#改变行列顺序"><span class="nav-number">3.7.</span> <span class="nav-text">改变行列顺序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-swap-two-columns-in-a-2d-numpy-array"><span class="nav-number">3.8.</span> <span class="nav-text">How to swap two columns in a 2d numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-swap-two-rows-in-a-2d-numpy-array"><span class="nav-number">3.9.</span> <span class="nav-text">How to swap two rows in a 2d numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-reverse-the-rows-of-a-2D-array"><span class="nav-number">3.10.</span> <span class="nav-text">How to reverse the rows of a 2D array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-reverse-the-columns-of-a-2D-array"><span class="nav-number">3.11.</span> <span class="nav-text">How to reverse the columns of a 2D array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#增加维度"><span class="nav-number">3.12.</span> <span class="nav-text">增加维度</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集合运算"><span class="nav-number">3.13.</span> <span class="nav-text">集合运算</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义函数"><span class="nav-number">3.14.</span> <span class="nav-text">自定义函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vectorize-–-Make-a-scalar-function-work-on-vectors"><span class="nav-number">3.15.</span> <span class="nav-text">vectorize – Make a scalar function work on vectors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#apply-along-axis-–-Apply-a-function-column-wise-or-row-wise"><span class="nav-number">3.16.</span> <span class="nav-text">apply_along_axis – Apply a function column wise or row wise</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#广播机制"><span class="nav-number">3.17.</span> <span class="nav-text">广播机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#一些有用函数"><span class="nav-number">3.18.</span> <span class="nav-text">一些有用函数</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-存取"><span class="nav-number">4.</span> <span class="nav-text">4.存取</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-import-and-export-data-as-a-csv-file"><span class="nav-number">4.1.</span> <span class="nav-text">How to import and export data as a csv file?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-handle-datasets-that-has-both-numbers-and-text-columns"><span class="nav-number">4.2.</span> <span class="nav-text">How to handle datasets that has both numbers and text columns?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-save-and-load-numpy-objects"><span class="nav-number">4.3.</span> <span class="nav-text">How to save and load numpy objects?</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-其他"><span class="nav-number">5.</span> <span class="nav-text">5.其他</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Import-numpy-as-np-and-see-the-version"><span class="nav-number">5.1.</span> <span class="nav-text">Import numpy as np and see the version</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-extract-items-that-satisfy-a-given-condition-from-1D-array"><span class="nav-number">5.2.</span> <span class="nav-text">How to extract items that satisfy a given condition from 1D array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-replace-items-that-satisfy-a-condition-with-another-value-in-numpy-array"><span class="nav-number">5.3.</span> <span class="nav-text">How to replace items that satisfy a condition with another value in numpy array?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-replace-items-that-satisfy-a-condition-without-affecting-the-original-array"><span class="nav-number">5.4.</span> <span class="nav-text">How to replace items that satisfy a condition without affecting the original array?</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">望江车神</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  


  

  

</body>
</html>
